// This is your Prisma schema file, learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider   = "prisma-client-js"
  output     = "../.prisma/client"
  engineType = "binary"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

model Employee {
  employeeID        Int                 @id @default(autoincrement())
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt
  email             String              @unique
  password          String
  firstName         String
  middleInitial     String?
  lastName          String
  occupation        String
  serviceRequests   ServiceRequest[]
}

/**
 * Each type of service request inherits from ServiceRequest
 * Only translator requests for Iteration 1
 */
model ServiceRequest {
  requestID         Int                @id @default(autoincrement())
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt
  // tables that inherit from ServiceRequest:
  translatorRequest TranslatorRequest[]
  // assigned relationship to Employee:
  assignedEmployeeID Int?
  assignedEmployee   Employee?        @relation(fields: [assignedEmployeeID], references: [employeeID])
}

model TranslatorRequest {
  languageFrom       String
  languageTo         String
  roomNum            String
  startDateTime      DateTime
  endDateTime        DateTime
  // link to service request:
  serviceRequestID   Int              @unique
  serviceRequest     ServiceRequest   @relation(fields: [serviceRequestID], references: [requestID])
}

enum RequestType {
  TranslatorRequest
}

model Department {
  departmentID       Int @id @default(autoincrement())
  name               String
  floor              Int
  suite              String         @unique
  specialtyServices  String
  hours              String?
  telephone          String
}
